(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{17:function(e,t,a){e.exports={host:"button_host__3mMtz"}},18:function(e,t,a){e.exports={host:"toast_host__2cNWh",fadeUp:"toast_fadeUp__2Coh9"}},20:function(e,t,a){e.exports=a.p+"static/media/logo.29f23a7a.svg"},22:function(e,t,a){e.exports=a(47)},27:function(e,t,a){},28:function(e,t,a){},3:function(e,t,a){e.exports={host:"catalog_host__1DF1w",grid:"catalog_grid___n6xa",item:"catalog_item__3nZ9w",selected:"catalog_selected__2gDYb",bought:"catalog_bought__2yfMB",itemName:"catalog_itemName__1ghTf",itemPrice:"catalog_itemPrice__ymBUL",cart:"catalog_cart__3J1NB",items:"catalog_items__2Ckwx"}},4:function(e,t,a){e.exports={host:"order-modal_host__1fNps",wrapper:"order-modal_wrapper__3z5Sl",headline:"order-modal_headline__1kMN4",item:"order-modal_item__26Gpo",footer:"order-modal_footer__3NaNE",total:"order-modal_total__30Gtl"}},47:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(7),o=a.n(r),l=(a(27),a(28),a(1)),i=a(17),s=a.n(i),u=function(e){var t=e.label,a=e.type,n=e.disabled,r=e.onClick;return c.a.createElement("button",{type:a,className:s.a.host,onClick:r,disabled:n},t)},m=a(18),d=a.n(m),f=function(e){var t=e.message,a=e.onClose;return Object(n.useEffect)((function(){var e=setTimeout(a,3e3);return function(){return clearTimeout(e)}})),o.a.createPortal(c.a.createElement("div",{className:d.a.host},t),document.getElementById("toast"))},_=a(21),p=a(19),b=a.n(p).a.create({baseURL:""}),h=a(5),E=a.n(h),g=function(e){var t=e.onSignIn,a=Object(n.useState)(""),r=Object(l.a)(a,2),o=r[0],i=r[1],s=Object(n.useState)(!1),m=Object(l.a)(s,2),d=m[0],p=m[1],h=Object(n.useState)(null),g=Object(l.a)(h,2),v=g[0],O=g[1],N=function(e){p(!0),function(e){return b.get("/users/".concat(e)).then((function(e){var t=e.data;return Object(_.a)({user_id:t.user.user_id},t.user.data)}))}(e).then((function(e){p(!1),t(e)})).catch((function(){p(!1),O("Could not fetch User")}))};return c.a.createElement("div",{className:E.a.host},c.a.createElement("h1",{className:E.a.title},"Welcome to ",c.a.createElement("br",null),"our benefits platform"),c.a.createElement("h2",{className:E.a.headline}," Start by telling us your name"),c.a.createElement("form",{className:E.a.form,onSubmit:function(e){e.preventDefault(),N(o)}},c.a.createElement("input",{type:"text",className:E.a.input,placeholder:"Please insert your name",value:o,onChange:function(e){return i(e.target.value)}}),c.a.createElement("div",{className:E.a.footer},c.a.createElement(u,{label:"Sign In",type:"submit",disabled:d}))),v?c.a.createElement(f,{message:v,onClose:function(){return O(null)}}):null)},v=a(4),O=a.n(v),N=function(e){var t=e.order,a=e.user,r=e.onClose,o=e.onConfirm,i=Object(n.useState)(!1),s=Object(l.a)(i,2),m=s[0],d=s[1],_=Object(n.useState)(null),p=Object(l.a)(_,2),h=p[0],E=p[1];Object(n.useEffect)((function(){return document.addEventListener("click",r),function(){document.removeEventListener("click",r)}}),[r]);var g=Object(n.useMemo)((function(){return t.reduce((function(e,t){return e+t.price}),0)}),[t]);return c.a.createElement("div",{className:O.a.host},c.a.createElement("div",{className:O.a.wrapper,onClick:function(e){e.nativeEvent.stopImmediatePropagation()}},c.a.createElement("h2",{className:O.a.headline},"Everything ready for you to enjoy your new benefits:"),c.a.createElement("div",{className:O.a.items},t.map((function(e){return c.a.createElement("div",{className:O.a.item,key:e.id},c.a.createElement("span",null,e.name),c.a.createElement("span",null,e.price," FlexPoints"))}))),c.a.createElement("div",{className:O.a.footer},c.a.createElement("div",{className:O.a.total},c.a.createElement("div",null,"Total Points: ",g),c.a.createElement("div",null,"Total Balance: ",(a.balance||0)-g)),c.a.createElement(u,{type:"button",label:"Confirm",onClick:function(){d(!0),function(e,t){return b.post("/orders",{order:{items:e.map((function(e){return e.id})),user_id:t}}).then((function(e){return e.data}))}(t,a.user_id).then((function(){d(!1),o(t.map((function(e){return e.id})))})).catch((function(e){E("Could not place order"),d(!1)}))},disabled:m}))),h?c.a.createElement(f,{message:h,onClose:function(){return E(null)}}):null)},j=a(3),C=a.n(j),x=function(e){var t=e.user,a=e.onChange,r=Object(n.useState)([]),o=Object(l.a)(r,2),i=o[0],s=o[1],m=Object(n.useState)([]),d=Object(l.a)(m,2),_=d[0],p=d[1],h=Object(n.useState)(t.product_ids||[]),E=Object(l.a)(h,2),g=E[0],v=E[1],O=Object(n.useState)([]),j=Object(l.a)(O,2),x=j[0],S=j[1],y=Object(n.useState)(t.balance||0),k=Object(l.a)(y,2),P=k[0],w=k[1],I=Object(n.useState)(!1),B=Object(l.a)(I,2),L=B[0],T=B[1],U=Object(n.useState)(null),F=Object(l.a)(U,2),D=F[0],G=F[1];return Object(n.useEffect)((function(){b.get("/products").then((function(e){return e.data.products})).then((function(e){s(e)})).catch((function(e){G("Could not fetch catalog")}))}),[]),c.a.createElement("div",{className:C.a.host},c.a.createElement("div",{className:C.a.grid},i.map((function(e){return c.a.createElement("div",{className:"".concat(C.a.item," ").concat(-1!==_.indexOf(e.id)?C.a.selected:""," ").concat(-1!==g.indexOf(e.id)?C.a.bought:""),key:e.id,onClick:function(){return function(e){var t=_.indexOf(e),n=_.splice(0),c=i.filter((function(t){return t.id===e}))[0];if(c){var r=P;-1!==t?(n.splice(t,1),r+=c.price):(n.push(e),r-=c.price),p(n),w(r),a(r)}}(e.id)}},c.a.createElement("div",{className:C.a.itemName},e.name),c.a.createElement("div",{className:C.a.itemPrice},e.price," FlexPoints"))}))),c.a.createElement("div",{className:C.a.cart},c.a.createElement(u,{type:"button",label:"Place Order",onClick:function(){var e=i.filter((function(e){return-1!==_.indexOf(e.id)&&-1===t.product_ids.indexOf(e.id)}));S(e),T(!0)},disabled:P<0||0===_.length})),L&&c.a.createElement(N,{user:t,order:x,onClose:function(){return T(!1)},onConfirm:function(e){v(g.concat(e)),p([]),T(!1)}}),D?c.a.createElement(f,{message:"toast",onClose:function(){return G(null)}}):null)},S=a(20),y=a.n(S),k=a(6),P=a.n(k),w=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(0),i=Object(l.a)(o,2),s=i[0],u=i[1];return c.a.createElement("div",{className:P.a.host},c.a.createElement("div",{className:P.a.content},c.a.createElement("div",{className:P.a.header},c.a.createElement("img",{src:y.a,className:P.a.logo,alt:"Coverflex Logo"}),a&&c.a.createElement("div",{className:P.a.user},c.a.createElement("div",null,c.a.createElement("span",{role:"img","aria-label":"Hello"},"\ud83d\udc4b")," Hello, ",a.user_id),c.a.createElement("div",{className:P.a.balance},c.a.createElement("span",{role:"img","aria-label":"Balance"},"\ud83d\udcb0"),s," FlexPoints"))),a?c.a.createElement(x,{user:a,onChange:u}):c.a.createElement(g,{onSignIn:function(e){r(e),u(e.balance||0)}})))};o.a.render(c.a.createElement(w,null),document.getElementById("root"))},5:function(e,t,a){e.exports={host:"signin_host__3Yk0V",title:"signin_title__2gwLp",headline:"signin_headline__3rToN",form:"signin_form__1x5Uj",input:"signin_input__1VxZa",footer:"signin_footer__2m2G3"}},6:function(e,t,a){e.exports={host:"app_host__2_SGr",content:"app_content__ckDFI",header:"app_header__2ppV5",user:"app_user__1ULKE",balance:"app_balance__2STIz"}}},[[22,1,2]]]);
//# sourceMappingURL=main.60784603.chunk.js.map